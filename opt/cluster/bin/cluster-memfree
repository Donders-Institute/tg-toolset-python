#!/bin/bash



wget -O - -q "http://ganglia/rawdata.php?c=Mentat Cluster&cols[]=mem_total.VAL&cols[]=mem_free.VAL&noheader" |

sort | 
awk '
BEGIN{
	IFS="\t"
	printf ("%-10s  %18s  %10s\n", "machine", "memavail", "memfree")
	printf ("%-10s  %18s  %10s\n", "-------", "--------", "-------")
	}
NF > 2{
	# beautify columns
	memtot=$2/(1024*1024)
	memfree=$3/(1024*1024)
	printf ("%-10s  %7.1f GB  %7.1f GB\n", $1, memtot, memfree)
}'
