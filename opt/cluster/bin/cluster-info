#!/bin/bash



wget -O - -q "http://ganglia/rawdata.php?c=Mentat Cluster&cols[]=load_one.VAL&cols[]=load_five.VAL&cols[]=load_fifteen.VAL&cols[]=mem_total.VAL&cols[]=mem_free.VAL&cols[]=disk_free.VAL&cols[]=disk_free.UNITS&noheader" |

sort | 
awk '
BEGIN{
	IFS="\t"
	printf ("%-10s  %5s  %5s  %6s  %5s  %5s  %7s\n", "machine", "load1", "load5", "load15", "memavail", "memfree", "diskfree")
	}
NF > 2{
	# beautify columns
	memtot=$5/(1024*1024)
	memfree=$6/(1024*1024)
	printf ("%-10s  %5s  %5s  %6s  %5.1fGB  %5.1fGB  %7.1f%2s\n", $1, $2, $3, $4, memtot, memfree, $7, $8)
}'
